Patch: 21_newlist_help.patch
Author: Tollef Fog Heen <tfheen@debian.org>
make newlist be a bit friendlier (Closes: #309339, #170362)
Index: mailman-2.1.10/bin/newlist
===================================================================
--- mailman-2.1.10.orig/bin/newlist	2008-04-21 20:28:22.000000000 +0200
+++ mailman-2.1.10/bin/newlist	2008-06-15 18:49:44.000000000 +0200
@@ -87,6 +87,9 @@
 defined in your Defaults.py file or overridden by settings in mm_cfg.py).
 
 Note that listnames are forced to lowercase.
+
+The list admin address need to be a fully-qualified address, like
+owner@example.com, not just owner.
 """
 
 import sys
@@ -94,6 +97,7 @@
 import getpass
 import getopt
 import sha
+import grp
 
 import paths
 from Mailman import mm_cfg
@@ -122,6 +126,9 @@
 
 
 def main():
+    gid = grp.getgrnam(mm_cfg.MAILMAN_GROUP)[2]
+    if os.getgid() != gid and gid not in os.getgroups():
+        os.setgid(gid)
     try:
         opts, args = getopt.getopt(sys.argv[1:], 'hql:u:e:',
                                    ['help', 'quiet', 'language=',
@@ -203,7 +210,7 @@
         except Errors.BadListNameError, s:
             usage(1, _('Illegal list name: %(s)s'))
         except Errors.EmailAddressError, s:
-            usage(1, _('Bad owner email address: %(s)s'))
+            usage(1, _('Bad owner email address: %(s)s.  Owner addresses need to be fully-qualified names, like "owner@example.com", not just "owner".'))
         except Errors.MMListAlreadyExistsError:
             usage(1, _('List already exists: %(listname)s'))
 
